(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[71],{6532:function(e,t,s){Promise.resolve().then(s.bind(s,9435))},9435:function(e,t,s){"use strict";s.r(t),s.d(t,{Dashboard:function(){return H}});var n=s(3827),r=s(7372),a=s(4090),o=s(489);function i(e){let{post:t,onDelete:s,onSelect:r,onUpdate:a}=e,i=async e=>{e.stopPropagation();let s="draft"===t.status?"published":"draft";await a({...t,status:s})},l="draft"===t.status?"bg-gray-100 text-gray-800":"bg-green-100 text-green-800";return(0,n.jsxs)("tr",{className:"cursor-pointer hover:bg-gray-50",onClick:()=>r(t),children:[(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap w-12",children:(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[t.sns_name&&(0,n.jsx)("img",{src:"https://lqncxiyjgzdpuatbzaoh.supabase.co/storage/v1/object/public/sns-icons/".concat(t.sns_name,".png"),alt:t.sns_name,className:"h-5 w-5"}),(0,n.jsx)("span",{children:"reddit"===t.sns_name&&(0,n.jsxs)("span",{className:"text-gray-500",children:["(r/",t.subreddit,")"]})})]})}),(0,n.jsx)("td",{className:"px-6 py-4 whitespace-pre-wrap break-words w-96",children:t.post_content}),(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap w-12 cursor-pointer",onClick:i,children:(0,n.jsx)("span",{className:"inline-block w-20 text-center px-2 py-1 rounded text-xs font-semibold ".concat(l),children:t.status})}),(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap w-12",children:new Date(t.post_date).toLocaleDateString()}),(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap w-12",children:(0,n.jsx)("button",{onClick:e=>{e.stopPropagation(),s(t.post_id)},className:"text-red-600 hover:text-red-800 flex justify-center items-center",children:(0,n.jsx)(o.Z,{className:"h-5 w-5"})})})]})}function l(e){let{posts:t,onUpdate:s,onDelete:r,onSelect:a}=e;return(0,n.jsx)("div",{className:"bg-white shadow-sm rounded-lg overflow-hidden",children:(0,n.jsx)("div",{className:"overflow-x-auto",children:(0,n.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 table-fixed",children:[(0,n.jsx)("thead",{className:"bg-gray-50",children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-1/5",children:"Platform"}),(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-4/5",children:"Content"}),(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-1/5",children:"Status"}),(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-1/5",children:"Date"}),(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-1/5",children:"Actions"})]})}),(0,n.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(e=>(0,n.jsx)(i,{post:e,onUpdate:s,onDelete:r,onSelect:a},e.post_id))})]})})})}function c(e){let{label:t,children:s,htmlFor:r}=e;return(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:r,className:"block text-sm font-medium text-gray-700",children:t}),(0,n.jsx)("div",{className:"mt-1",children:s})]})}let d=["SaaS","microsaas","roastmystartup","GrowthHacking","MarketingAutomation","roastmystartup","apps","Development","Entrepreneur","generativeai","indiehackers"];function u(e){let{subreddit:t,onChange:s}=e;return(0,n.jsx)(c,{label:"Subreddit",htmlFor:"subreddit",children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("input",{type:"text",id:"subreddit",className:"p-2 block w-full rounded-md border-gray-300 shadow-sm focus:outline-none focus:ring-1 focus:border-teal-800 focus:ring-teal-800",value:t,onChange:e=>s(e.target.value),placeholder:"Enter subreddit name"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:"Popular subreddits:"}),(0,n.jsx)("div",{className:"flex flex-wrap gap-2",children:d.map(e=>(0,n.jsxs)("button",{type:"button",onClick:()=>s(e),className:"px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded-full hover:bg-gray-200",children:["r/",e]},e))})]})]})})}let m={TWITTER:"twitter",FACEBOOK:"facebook",REDDIT:"reddit"};m.TWITTER,m.FACEBOOK,m.REDDIT;var x=s(2920);let p={post_content:"",sns_id:"",sns_name:"",post_date:new Date,status:"draft",subreddit:""};function f(e){let{snsList:t,onSubmit:s,initialData:r,onSuccess:o,onError:i}=e,[l,d]=(0,a.useState)(p);(0,a.useEffect)(()=>{r?d({...r,post_date:new Date(r.post_date)}):d(p)},[r]);let f=()=>{d(p)},h=async e=>{var n;if(e.preventDefault(),!(null===(n=l.post_content)||void 0===n?void 0:n.trim())){null==i||i("Post content is required");return}if(!l.sns_id){null==i||i("Please select a platform");return}if(!l.post_date){null==i||i("Post date is required");return}let a=t.find(e=>e.sns_id===l.sns_id);if((null==a?void 0:a.sns_name)===m.REDDIT&&!l.subreddit){null==i||i("Subreddit is required for Reddit posts");return}try{let e={post_content:l.post_content,sns_id:l.sns_id,sns_name:l.sns_name,post_date:l.post_date,status:l.status||"draft",subreddit:l.subreddit||""};await s(e),null==o||o(),r||f()}catch(e){null==i||i(e instanceof Error?e.message:"Failed to save post")}},g=null==t?void 0:t.find(e=>e.sns_id===l.sns_id);return(0,n.jsxs)("form",{onSubmit:h,className:"space-y-6 bg-white p-6 rounded-lg shadow-sm",children:[(0,n.jsx)(c,{label:"Post Content",htmlFor:"post_content",children:(0,n.jsx)("textarea",{id:"post_content",rows:4,className:"p-2 block w-full rounded-md border-gray-300 shadow-sm focus:outline-none focus:ring-1 focus:border-teal-800 focus:ring-teal-800",value:l.post_content||"",onChange:e=>d({...l,post_content:e.target.value})})}),(0,n.jsx)(c,{label:"Platform",htmlFor:"sns_id",children:(0,n.jsxs)("select",{id:"sns_id",className:"p-2 block w-full rounded-md border-gray-300 shadow-sm focus:outline-none focus:ring-1 focus:border-teal-800 focus:ring-teal-800",value:l.sns_id||"",onChange:e=>{let s=t.find(t=>t.sns_id===e.target.value);d({...l,sns_id:e.target.value,sns_name:(null==s?void 0:s.sns_name)||"",subreddit:""})},children:[(0,n.jsx)("option",{value:"",children:"Select Platform"}),null==t?void 0:t.map(e=>(0,n.jsx)("option",{value:e.sns_id,children:e.sns_name},e.sns_id))]})}),(null==g?void 0:g.sns_name)===m.REDDIT&&(0,n.jsx)(u,{subreddit:l.subreddit||"",onChange:e=>d({...l,subreddit:e})}),(0,n.jsx)(c,{label:"Post Date",htmlFor:"post_date",children:(0,n.jsx)("input",{type:"datetime-local",id:"post_date",className:"p-2 block w-full rounded-md border-gray-300 shadow-sm focus:outline-none focus:ring-1 focus:border-teal-800 focus:ring-teal-800",value:l.post_date?(0,x.L9)(new Date(l.post_date)):"",onChange:e=>d({...l,post_date:new Date(e.target.value)})})}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("button",{type:"button",onClick:f,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"Reset"}),(0,n.jsx)("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-teal-800 hover:bg-teal-900 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-800",children:r?"Update Post":"Create Post"})]})]})}var h=s(5757);function g(e){let{platforms:t,selectedPlatform:s,onPlatformChange:r}=e;return(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("button",{onClick:()=>r(""),className:"px-3 py-1 rounded-full text-sm ".concat(""===s?"bg-teal-100 text-teal-800":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"All"}),null==t?void 0:t.map(e=>(0,n.jsx)("button",{onClick:()=>r(e.sns_id),className:"px-3 py-1 rounded-full text-sm ".concat(s===e.sns_id?"bg-teal-100 text-teal-800":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:e.sns_name},e.sns_id))]})}function y(e){let{platforms:t,selectedPlatform:s,startDate:r,endDate:a,onPlatformChange:o,onStartDateChange:i,onEndDateChange:l}=e;return(0,n.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm mb-6 space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Platform"}),(0,n.jsx)(g,{platforms:t,selectedPlatform:s,onPlatformChange:o})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Date Range"}),(0,n.jsx)(h.f,{startDate:r,endDate:a,onStartDateChange:i,onEndDateChange:l})]})]})}var b=s(632),j=s(3459);function v(e){let{content:t,children:s}=e,[r,o]=(0,a.useState)(!1),i=(0,a.useRef)(null);return(0,a.useEffect)(()=>{function e(e){i.current&&!i.current.contains(e.target)&&o(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,n.jsxs)("div",{className:"relative inline-block",ref:i,children:[(0,n.jsx)("button",{type:"button",onClick:()=>o(!r),className:"text-gray-500 hover:text-gray-700 focus:outline-none",children:s}),r&&(0,n.jsx)("div",{className:"absolute z-10 w-96 mt-2 -right-2 transform translate-y-1",children:(0,n.jsx)("div",{className:"bg-white rounded-lg shadow-lg ring-1 ring-black ring-opacity-5 p-4",children:t})})]})}function w(){return(0,n.jsx)(v,{content:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:"Import Format"}),(0,n.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"The JSON file should contain an array of post objects with the following structure:"})]}),(0,n.jsx)("div",{className:"bg-gray-50 rounded-md p-3",children:(0,n.jsx)("pre",{className:"text-xs text-gray-600 overflow-x-auto",children:JSON.stringify([{post_content:"Hello World!",sns_id:"x",sns_name:"x",post_date:"2024-03-20T15:00:00.000Z",status:"draft",subreddit:"programming"}],null,2)})}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("h4",{className:"text-xs font-medium text-gray-900",children:"Required Fields:"}),(0,n.jsxs)("ul",{className:"text-xs text-gray-600 list-disc list-inside",children:[(0,n.jsx)("li",{children:"post_content: string"}),(0,n.jsx)("li",{children:"sns_id: string"})]}),(0,n.jsx)("h4",{className:"text-xs font-medium text-gray-900",children:"Optional Fields:"}),(0,n.jsxs)("ul",{className:"text-xs text-gray-600 list-disc list-inside",children:[(0,n.jsx)("li",{children:"post_date: ISO 8601 date string"}),(0,n.jsx)("li",{children:'status: "draft" | "scheduled" | "published" | "failed"'}),(0,n.jsx)("li",{children:"subreddit: string (required for Reddit posts)"})]})]})]}),children:(0,n.jsx)(j.Z,{className:"h-4 w-4"})})}function N(e){let{onImport:t,onError:s}=e,r=(0,a.useRef)(null),o=async e=>{var n;let a=null===(n=e.target.files)||void 0===n?void 0:n[0];if(a)try{let e=await a.text(),s=JSON.parse(e);if(!Array.isArray(s))throw Error("Invalid format: File must contain an array of posts");t(s),r.current&&(r.current.value="")}catch(e){s(e instanceof Error?e.message:"Failed to parse JSON file")}};return(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("input",{ref:r,type:"file",accept:".json",onChange:o,className:"hidden"}),(0,n.jsxs)("button",{onClick:()=>{var e;return null===(e=r.current)||void 0===e?void 0:e.click()},className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,n.jsx)(b.Z,{className:"h-4 w-4"}),"Import Posts"]}),(0,n.jsx)(w,{})]})}var _=s(9355),C=s(6490);function S(e){let{activeTab:t,onTabChange:s,upcomingCount:r,pastCount:a}=e;return(0,n.jsx)("div",{className:"border-b border-gray-200",children:(0,n.jsxs)("nav",{className:"-mb-px flex space-x-8",children:[(0,n.jsxs)("button",{onClick:()=>s("upcoming"),className:"\n            flex items-center gap-2 py-4 px-1 border-b-2 text-sm font-medium\n            ".concat("upcoming"===t?"border-teal-800 text-teal-800":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","\n          "),children:[(0,n.jsx)(_.Z,{className:"h-4 w-4"}),"Upcoming",(0,n.jsx)("span",{className:"ml-2 rounded-full bg-gray-100 px-2.5 py-0.5 text-xs font-medium text-gray-600",children:r})]}),(0,n.jsxs)("button",{onClick:()=>s("past"),className:"\n            flex items-center gap-2 py-4 px-1 border-b-2 text-sm font-medium\n            ".concat("past"===t?"border-teal-800 text-teal-800":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","\n          "),children:[(0,n.jsx)(C.Z,{className:"h-4 w-4"}),"Past",(0,n.jsx)("span",{className:"ml-2 rounded-full bg-gray-100 px-2.5 py-0.5 text-xs font-medium text-gray-600",children:a})]})]})})}var E=s(1310),k=s(4958);function D(e){return{post_id:e.post_id,sns_id:e.sns_id,sns_name:e.sns_name,post_content:e.post_content,post_date:new Date(e.post_date),status:e.status,created_at:new Date(e.created_at),subreddit:e.subreddit||void 0,user_id:e.user_id}}function P(e){var t;return{post_id:e.post_id,sns_id:e.sns_id,sns_name:e.sns_name,post_content:e.post_content,post_date:null===(t=e.post_date)||void 0===t?void 0:t.toISOString(),status:e.status,subreddit:e.subreddit,user_id:e.user_id}}async function O(e){let{data:t,error:s}=await k.O.from("posts").select("*").eq("user_id",e).order("post_date",{ascending:!1});if(s)throw s;return(null!=t?t:[]).map(D)}async function I(e,t){let s=P({...e,user_id:t});console.log(t);let{data:n,error:r}=await k.O.from("posts").insert(s).select().single();if(r)throw r;return D(n)}async function T(e,t){let s=P({...e,user_id:t}),{data:n,error:r}=await k.O.from("posts").update(s).eq("post_id",e.post_id).eq("user_id",t).select().single();if(r)throw r;return D(n)}async function F(e,t){let{error:s}=await k.O.from("posts").delete().eq("post_id",e).eq("user_id",t);if(s)throw s}async function A(e,t){let s=e.map(e=>({...e,user_id:t})),n=await fetch("/api/posts/import",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!n.ok)throw Error("Failed to import posts");return n.json()}var R=s(3779),q=s(6578),Z=s(1483),J=s(2235),M=s(9769),z=s(3167),U=s(1367);let V=(0,M.j)("fixed bottom-4 right-4 flex items-center gap-2 px-4 py-3 rounded-lg shadow-lg transition-all duration-300 ease-in-out",{variants:{type:{success:"bg-green-100 text-green-800 border-green-300",error:"bg-red-100 text-red-800 border-red-300"},visibility:{visible:"translate-y-0 opacity-100",hidden:"translate-y-2 opacity-0"}},defaultVariants:{type:"success",visibility:"hidden"}});function L(e){let{message:t,type:s,onClose:r,duration:o=3e3}=e,[i,l]=a.useState(!1);return(0,a.useEffect)(()=>{l(!0);let e=setTimeout(()=>{l(!1),setTimeout(r,300)},o);return()=>clearTimeout(e)},[o,r]),(0,n.jsxs)("div",{className:function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,U.m6)((0,z.W)(t))}(V({type:s,visibility:i?"visible":"hidden"})),children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:["success"===s?(0,n.jsx)(q.Z,{className:"h-5 w-5 text-green-500"}):(0,n.jsx)(Z.Z,{className:"h-5 w-5 text-red-500"}),(0,n.jsx)("span",{className:"text-sm font-medium",children:t})]}),(0,n.jsx)("button",{onClick:()=>l(!1),className:"ml-2 text-gray-500 hover:text-gray-700 transition-colors duration-200",children:(0,n.jsx)(J.Z,{className:"h-4 w-4"})})]})}function H(){let{toast:e,showToast:t,hideToast:s}=(0,E.p)(),{posts:o,loading:i,createPost:c,updatePost:d,deletePost:u,importPosts:m}=function(){let[e,t]=(0,a.useState)([]),[s,n]=(0,a.useState)(!0),{showToast:r}=(0,E.p)(),{user:o}=(0,a.useContext)(R.V);async function i(e){try{let s=await O(e);t(s)}catch(e){r(e instanceof Error?e.message:"Failed to load posts","error")}finally{n(!1)}}async function l(s){if(!o)throw r("Please log in to create posts","error"),Error("Not logged in");try{console.log(o.id);let n=await I(s,o.id);return t([n,...e]),r("Post created successfully","success"),n}catch(e){throw r(e instanceof Error?e.message:"Failed to create post","error"),e}}async function c(s){if(!o)throw r("Please log in to update posts","error"),Error("Not logged in");try{let n=await T(s,o.id);return t(e.map(e=>e.post_id===n.post_id?n:e)),r("Post updated successfully","success"),n}catch(e){throw r(e instanceof Error?e.message:"Failed to update post","error"),e}}async function d(s){if(!o)throw r("Please log in to delete posts","error"),Error("Not logged in");try{await F(s,o.id),t(e.filter(e=>e.post_id!==s)),r("Post deleted successfully","success")}catch(e){throw r(e instanceof Error?e.message:"Failed to delete post","error"),e}}async function u(s){if(!o)throw r("Please log in to import posts","error"),Error("Not logged in");try{let n=await A(s,o.id);return t([...n,...e]),r("Successfully imported ".concat(n.length," posts"),"success"),n}catch(e){throw r(e instanceof Error?e.message:"Failed to import posts","error"),e}}return(0,a.useEffect)(()=>{o?i(o.id):n(!1)},[o]),{posts:e,loading:s,createPost:l,updatePost:c,deletePost:d,importPosts:u}}(),{snsList:p}=function(){let[e,t]=(0,a.useState)([]);return(0,a.useEffect)(()=>{(async function(){let{data:e,error:s}=await k.O.from("sns_master").select("*");s?console.error("Failed to fetch SNS list:",s.message):e&&t(e)})()},[]),{snsList:e}}(),{selectedPlatform:h,setSelectedPlatform:g,startDate:b,setStartDate:j,endDate:v,setEndDate:w,sortAscending:_,setSortAscending:C,filteredPosts:D}=function(e){let[t,s]=(0,a.useState)(""),[n,r]=(0,a.useState)(""),[o,i]=(0,a.useState)(""),[l,c]=(0,a.useState)(!1),d=(0,a.useMemo)(()=>(function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return[...e].sort((e,s)=>{let n=new Date(e.post_date).getTime(),r=new Date(s.post_date).getTime();return t?n-r:r-n})})(e.filter(e=>{let s=!t||e.sns_id===t,r=(0,x.XE)(e.post_date,n,o);return s&&r}),l),[e,t,n,o,l]);return{selectedPlatform:t,setSelectedPlatform:s,startDate:n,setStartDate:r,endDate:o,setEndDate:i,sortAscending:l,setSortAscending:c,filteredPosts:d}}(o),{activeTab:P,setActiveTab:q,currentPosts:Z,upcomingCount:J,pastCount:M}=function(e){let[t,s]=(0,a.useState)("upcoming"),{upcomingPosts:n,pastPosts:r}=(0,a.useMemo)(()=>{let t=[],s=[];return e.forEach(e=>{(0,x.Ux)(e.post_date)?t.push(e):s.push(e)}),t.sort((e,t)=>new Date(e.post_date).getTime()-new Date(t.post_date).getTime()),s.sort((e,t)=>new Date(t.post_date).getTime()-new Date(e.post_date).getTime()),{upcomingPosts:t,pastPosts:s}},[e]);return{activeTab:t,setActiveTab:s,currentPosts:"upcoming"===t?n:r,upcomingCount:n.length,pastCount:r.length}}(D),[z,U]=(0,a.useState)(void 0);if(i)return(0,n.jsx)(r.A,{children:(0,n.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})})});let V=()=>{U(void 0)};return(0,n.jsx)(r.A,{children:(0,n.jsxs)("div",{className:"space-y-8",children:[(0,n.jsx)(y,{selectedPlatform:h,startDate:b,endDate:v,onPlatformChange:g,onStartDateChange:j,onEndDateChange:w,platforms:p}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold",children:"SNS"}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("button",{type:"button",onClick:()=>U(void 0),className:"px-4 py-2 text-sm font-medium text-white bg-teal-800 hover:bg-teal-900 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-900",children:"New Post"}),(0,n.jsx)(N,{onImport:m,onError:e=>console.error(e)})]})]}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)(S,{activeTab:P,onTabChange:q,upcomingCount:J,pastCount:M}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,n.jsx)("div",{className:"md:col-span-2",children:(0,n.jsx)(l,{posts:Z,onUpdate:d,onDelete:async e=>{try{await u(e),t("Post deleted successfully","success")}catch(e){t("Failed to delete post","error")}},onSelect:e=>{U(e)}})}),(0,n.jsx)("div",{children:(0,n.jsx)(f,{onSubmit:z?e=>d({...z,...e}):c,snsList:p,initialData:z,onSuccess:()=>{V(),t(z?"Post updated successfully":"Post created successfully","success")},onError:e=>t(e,"error")})})]})]}),e.isVisible&&(0,n.jsx)(L,{message:e.message,type:e.type,onClose:s})]})})}},5757:function(e,t,s){"use strict";s.d(t,{f:function(){return a}});var n=s(3827);s(4090);var r=s(7307);function a(e){let{startDate:t,endDate:s,onStartDateChange:a,onEndDateChange:o}=e;return(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(r.Z,{className:"h-4 w-4 text-gray-500 mr-2"}),(0,n.jsx)("input",{type:"date",value:t,onChange:e=>a(e.target.value),className:"rounded-md border-gray-300 shadow-sm focus:outline-none focus:ring-1 focus:border-blue-500 focus:ring-blue-500"})]}),(0,n.jsx)("span",{className:"text-gray-500",children:"to"}),(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(r.Z,{className:"h-4 w-4 text-gray-500 mr-2"}),(0,n.jsx)("input",{type:"date",value:s,onChange:e=>o(e.target.value),className:"rounded-md border-gray-300 shadow-sm focus:outline-none focus:ring-1 focus:border-blue-500 focus:ring-blue-500"})]})]})}},7372:function(e,t,s){"use strict";s.d(t,{A:function(){return d}});var n=s(3827),r=s(4292),a=s.n(r),o=s(4090),i=s(7907),l=s(3779),c=s(4958);function d(e){var t;let{children:s}=e,{user:r}=(0,o.useContext)(l.V),d=(0,i.useRouter)(),[u,m]=(0,o.useState)(!1),x=async()=>{await c.O.auth.signOut(),d.push("/login")},p=null==r?void 0:null===(t=r.user_metadata)||void 0===t?void 0:t.picture,f=!!p,h=r&&r.email?r.email.charAt(0).toUpperCase():"";return(0,n.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,n.jsx)("nav",{className:"shadow-sm",children:(0,n.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,n.jsxs)("div",{className:"flex h-16 items-center justify-between",children:[(0,n.jsx)("div",{className:"flex items-center space-x-4",children:(0,n.jsxs)("button",{onClick:()=>d.push("/"),className:"flex items-center space-x-2 focus:outline-none hover:opacity-80",children:[(0,n.jsx)("img",{src:"/sekai-message-logo.svg",alt:"Logo",className:"h-8 w-8 object-cover rounded-full"}),(0,n.jsx)("span",{className:"text-xl font-semibold ".concat(a().className),children:"SEKAI NI TODOKERU MESSAGES"})]})}),(0,n.jsxs)("div",{className:"flex items-center space-x-4 relative",children:[(0,n.jsx)("button",{onClick:()=>d.push("/sns"),className:"text-gray-700 hover:text-gray-900 focus:outline-none",children:"SNS"}),(0,n.jsx)("button",{onClick:()=>d.push("/articles"),className:"text-gray-700 hover:text-gray-900 focus:outline-none",children:"Articles"}),!r&&(0,n.jsx)("button",{onClick:()=>d.push("/login"),className:"text-gray-700 hover:text-gray-900 focus:outline-none",children:"Login"}),r&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{onClick:()=>m(!u),className:"flex items-center justify-center w-10 h-10 rounded-full bg-gray-200 hover:bg-gray-300 relative focus:outline-none",children:f&&p?(0,n.jsx)("img",{src:p,alt:"User Avatar",className:"w-10 h-10 rounded-full object-cover"}):(0,n.jsx)("span",{className:"text-gray-700 font-bold",children:h})}),u&&(0,n.jsx)("div",{className:"absolute top-12 right-0 bg-white border rounded shadow-lg py-1 z-50 w-32",children:(0,n.jsx)("button",{onClick:x,className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 focus:outline-none",children:"Logout"})})]})]})]})})}),(0,n.jsx)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s})]})}},3779:function(e,t,s){"use strict";s.d(t,{H:function(){return i},V:function(){return o}});var n=s(3827),r=s(4958),a=s(4090);let o=(0,a.createContext)({user:null});function i(e){let{children:t}=e,[s,i]=(0,a.useState)(null);return(0,a.useEffect)(()=>{r.O.auth.getUser().then(e=>{let{data:{user:t}}=e;return i(t)});let{data:e}=r.O.auth.onAuthStateChange((e,t)=>{var s;i(null!==(s=null==t?void 0:t.user)&&void 0!==s?s:null)});return()=>{e.subscription.unsubscribe()}},[]),(0,n.jsx)(o.Provider,{value:{user:s},children:t})}},1310:function(e,t,s){"use strict";s.d(t,{p:function(){return r}});var n=s(4090);function r(){let[e,t]=(0,n.useState)({message:"",type:"success",isVisible:!1});return{toast:e,showToast:(0,n.useCallback)((e,s)=>{t({message:e,type:s,isVisible:!0})},[]),hideToast:(0,n.useCallback)(()=>{t(e=>({...e,isVisible:!1}))},[])}}},4958:function(e,t,s){"use strict";s.d(t,{O:function(){return o}});var n=s(9377);let r="https://lqncxiyjgzdpuatbzaoh.supabase.co",a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxxbmN4aXlqZ3pkcHVhdGJ6YW9oIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzQ1OTMwMjQsImV4cCI6MjA1MDE2OTAyNH0.6MzhRLgwmDECc63nzV0BUeMqySq2OvwE4B7jCTKEr5Q";if(!r||!a)throw Error("Missing Supabase environment variables");let o=(0,n.eI)(r,a)},2920:function(e,t,s){"use strict";function n(e){return e.toISOString().slice(0,16)}function r(e,t,s){if(!t&&!s)return!0;let n=new Date(e);if(n.setHours(0,0,0,0),t&&s){let e=new Date(t),r=new Date(s);return r.setHours(23,59,59,999),n>=e&&n<=r}if(t)return n>=new Date(t);if(s){let e=new Date(s);return e.setHours(23,59,59,999),n<=e}return!0}function a(e){let t=new Date;t.setHours(0,0,0,0);let s=new Date(e);return s.setHours(0,0,0,0),s>=t}s.d(t,{L9:function(){return n},Ux:function(){return a},XE:function(){return r}})}},function(e){e.O(0,[377,600,971,69,744],function(){return e(e.s=6532)}),_N_E=e.O()}]);